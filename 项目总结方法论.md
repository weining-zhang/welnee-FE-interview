# 项目方法论（汇报、晋升、面试



### 一、找到自己的亮点

- 新技术应用
- 业务量级
- 影响范围
- 技术广度
- 影响力
- 差异点



### 二、把关键点研究透彻

- 技术前因后果、原理能否说清楚？
  - 最忌就事论事，能否举一反三，触类旁通？
- 足够的数据支撑
  - 项目当前的数据，理论的数据以及数据的计算方式是否能说清楚？
- 是否准备了 “负面” 内容？
  - 对项目的自我挑战之类的 “负面” 内容能带来更大的陈述价值。
  - 项目的瓶颈是什么？优化方案是什么？
  - 如果出了 “各种” 问题的话，怎么办？



### 三、鼓起气场

- 面试不是考试，是要告诉评委你很牛X！
- 气场的表现
  - 自信
  - 节奏感
  - 侃侃而谈
  - **交流感（而非汇报）**



### 四、管理好节奏

- 一部分内容快速过，一部分内容重点讲，能给评委一种内容量很大的感觉



### 五、通过拉关系让评委认识你

- 通过有影响力的人或项目让评委加强对你的认知
  - 比如大人物、明星项目
  - 你和牛人的有没有交集？
  - 项目不可能是一个人做完的，只要能说清楚，就可以当作自己的。
  - 核心是为了体现你能做什么，而不是做什么了



### 六、了解真正的考察点

- 是否真正了解项目？
- 数据是否有说服力？
- 项目的技术元素是否足够？



### 七、意料之外的问题怎么办

- 预估 “反面” 挑战，做好准备
  - 项目的瓶颈在哪里？
  - 还有什么可以改进的？
  - 怎么支撑柔性、有损、海量？
  - 如果出了xxx问题你怎么办？
- 难以回答问题怎么处理？
  - 不要愣在那里，先复述一遍问题
    - 第一反映很重要，不考虑能否答对，答上再说
  - 就问题本身进行一下分析
    - 一般与此类似的问题还会有哪些，这些问题一般属于什么类型的问题
  - 回顾一下业务本身在这些方面的现状（梳理）
    - 目前而言我们在其他 xx\yy\zz 问题上进行了一些xxxx之类的设计
  - 逐步靠近正题（逐渐进入了思考状态）
    - 如果真的………..那么我们会从一下几个方面去考虑……………
  - 总结收尾（有能力从计划到行动）
    - 这些方案确实在我们的计划之中，预计会怎么怎么去做…………..





# 方案设计十问



### 一、内容

- 底层逻辑是什么?
- 顶层设计是什么?
- ⽅案的优势是什么？
- 最终交付的价值是什么？



### 二、流程

- 过程以什么为抓⼿?
- 如何保证结果闭环？



### 三、个人

- 是否形成⾃⼰的⽅法论？
- 是否有⾃⼰的沉淀和思考？
- 为什么由你来出⽅案？⽅案是否有与众不同之处？换别⼈来发是⼀样的吗？⽐别⼈的亮点在哪⾥？



### 四、整体逻辑

- 从答辩的⻆度出发，回答三个问题：

  1. 现有⽅案存在什么问题？存在什么痛点？

  2. 当前业内有对这些问题什么解决⽅法？效果如何？有什么优缺点？

  3. ⾯对现有的痛点和难点，我们有什么好的解决⽅案？跟业内成熟的⽅案相⽐，如何？





# 实际项目

- 项目亮点

- 业务问题
  - 项目整体情况，涉及的技术原理（最忌就事论事，能否举一反三
  - 具体做了什么东西？
    - 目前做的方案与主流方案差距有哪些？要怎么做？
  - 具体业务场景的解决方案？
    - 可能出现的问题，如何解决？
    - 项目难点痛点是什么，怎么改进？



### CODING 代码托管

- #### 微前端

  - 关键点：

    - 路由管理
    - 应用通信
    - 性能优化
    - 隔离

  - #### QA

    - single-spa 框架的原理是什么？主要是路由劫持和应用加载
    - **如何实现环境隔离？**
      - js 隔离如何做？没有做隔离，可以用 proxy 沙箱
      - 如何处理样式隔离？css-module、shadow dom
    - **不同子应用如何通信？**
      - 全局状态对象，如 redux
      - 发布订阅模式
    - **主应用共享数据，如何对子应用访问进行权限控制？**
      - token 鉴权，加载子应用时派发 token，请求时携带
      - 发布订阅模式通信时，子应用携带标识，主应用判断标识进行权限管控
    - **不同⼦应用之间的跳转，⻚⾯会抖动⽩屏，怎么优化？**
      - 缓存微应用
      - 预加载，`<link prefetch />`
    - **子应用部署后，如何提示业务人员更新系统？**
      - 定期检查更新，请求微前端资源的地址，对比最新配置的commitId与当前加载的commitId，来决定是否提示用户更新
    - **如何控制子应用加载顺序？**
      - 注册顺序决定了执行顺序，所以要把导航栏之类应用的注册顺序放到最前，同时匹配到两个子应用时，确保在加载其他子应用前先加载导航栏

  - #### **遇到的问题：**

    - **每个子应用都有自己的依赖，造成重复加载，如何优化？**
      - 共享依赖，Module Federation

  - #### **可能出现的问题：**

    - **一个基座怎么加载两个子应用？**https://mp.weixin.qq.com/s/z0_PRSg8xHIEE258s3dqpA
      - 路由抢占问题怎么办？先卸载不需要的子应用
    - **子应用嵌套，就是子应用里需要加载子应用，怎么加载？**
    - **如果是跨⼦域名的不同项⽬集成，登录态如何传递？**
      1. 采用基于令牌的身份验证机制，如 JWT
      2. OAuth

- #### BFF

  - #### **动机**

    - 出发点
      - 接口聚合
    - 成果
      - 主页接口由10个接口 -> 4个 Graphql请求

  - #### 具体实践

    - 主页未聚合接口梳理
      1. 仓库列表
      2. commit 列表
      3. 分支规范
      4. 只读文件
    - 接口分类聚合：
      1. 仓库分组信息、公共分组信息
      2. 仓库容量、settings 接口
      3. 仓库详情、仓库导入信息、仓库同步状态
      4. 分支信息、标签信息
      5. commit数量、文件夹目录信息、文件夹信息
         - 文件夹目录信息 treeInfo ：右侧目录相关数据
         - 文件夹信息 tree ：左侧文件树信息、文件锁相关信息、readme相关信息
    - 精确查询：
      - 锁信息顶层查询，具体文件夹请求不查询锁信息字段

  - #### QA

    - **什么东西应该放在 BFF 层去做？**
      - 后端接口数据编排，接口聚合
    - **使用 GrahphQL 有什么好处或者说为什么要用？**
      1. 数据编排，减少接口请求
      2. 查询指定数据，减少冗余数据
      3. 拼接数据，无需后端新增接口
    - **为什么把 GraphQL 请求拆分为多个请求？**
      1. 并行性，防止一些字段请求比较耗时阻塞其他字段获取
      2. 数据粒度，拆分的子请求可以复用到其他页面
      3. 更好的利用缓存

  - #### **遇到的问题：**

    - N + 1 问题，通过 dataloader 解决，原理？

      https://tech.meituan.com/2021/05/06/bff-graphql.html

      - 通过将相邻的、相同类型的数据加载请求合并为单个请求
        - 如查询分支列表信息，如果每个分支都要单独查询，那么会将每个分支查询合并一起再查询
      - 前几毫秒，dataloader 会收集所有请求id，启动一个定时器，时间到的时候再去批量请求；dataloader 返回数据前某个id的原子请求会被阻塞。

    - 错误监控、日志上报怎么做？

- #### 多语言国际化

  - 流程：
    - 1、包裹词条	2、提取词条	3、翻译	4、测试
  - **当前痛点是什么？**
    1. 人工包裹、提取词条非常繁琐
  - **怎么做？**
    - 解决方案原理：
      - 词条提取
        1. 先扫描所有文件内容，生成 AST；
        2. 遍历 AST，修改 visitor 对象的方法，针对不同类型节点（JSX文本、模版字符串、普通字符串）做处理精确提取文案，生成一个文案节点数据 map；
        3. 将 map 转成数组遍历生成一个json对象，写入翻译文件；
      - 词条包裹
        - 遍历 map，每一个路径都判断是否要包裹 和 导入依赖
      - 词条翻译，机翻，再人工校验
  - **你做了哪些内容？**
  - **遇到什么问题？**
    - 词条包裹如何匹配？
      - AST，处理 babel 的 transform 阶段，通过修改 visitor 对象的
        - StringLiteral 方法，判断需要包裹的节点，创建新节点替换；
        - CallExpression 方法，配置需要忽略的包裹的方法，排除 log 函数里的字符串
    - 词条包裹如何处理 console.log 函数？
      - AST 并不会关心函数内部执行逻辑，不需要额外处理
    - 如何提取增量词条？
      - i18next-scanner
  - **可能出现的问题？**
    - 页面如何检测异常？
      - cypress 截图，调用腾讯云OCR服务提取文字，进行对比

- #### 埋点监控

  - 控制台报错，sourcemap 问题
  - **遇到什么问题？**
    - 埋点代码与业务逻辑耦合，怎么解决？
      - 封装埋点逻辑到自定义组件，使用自定义组件，如 button
    - **频繁上报的场景，如何优化？**
      - 进入队列，通过定时任务批量上报，可根据不同类型的点应用不同的上报频率
  - **与主流方案存在的差距，还可以做哪些？**
    - 如何分析出某一页面的请求量？请求头加上当前页面的 pageId 或者 通过正则判断 url 识别页面
    - 曝光埋点如何做？Intersection Observer

- 性能优化

  - webpack 拆包、externals、压缩图片
    - 如何分析包体积减少多少，页面加载速度提高多少（收益

- #### 虚拟滚动

  - 技术原理是什么？滚动容器固定高度，只渲染可视区域的固定元素
    1. 获取 scrollTop，计算可视元素起始索引
    2. 渲染固定数量的DOM元素（结束索引 = 起始索引+固定渲染的数量
  - **可能遇到的问题？**
    - 子元素固定和不固定高度的列表分别怎么实现？
      - 不固定高度 case**（不定高滚动是难点**
        1. 先按默认高度渲染，渲染出来之后拿到高度并缓存
        2. 修正高度：https://juejin.cn/post/7293805895917748274#heading-6
           - 修正每条数据高度
           - 更新列表总高度
           - 更新偏移量 scrollTop
    - 怎么优化虚拟列表？
      1. 节流
      2. scroll 回调的处理放到 requestAnimationFrame 中，可以合并回流重绘
      3. 窗口位移使用 transform，使用单独的图层渲染
      4. 缓存
    - 虚拟滚动怎么实现加载更多？

- 业务代码

  1. 导入仓库

  2. 仓库列表拖动排序

  3. **仓库列表虚拟滚动**

  4. **Web Worker 应用**

     1. 文件冲突场景
        - 获取冲突内容
        - 计算冲突行范围
     2. 代码高亮
        - 场景：
          1. 查找代码结果高亮
          2. Markdown 高亮代码
        - 原理是什么？

  5. 弹窗输入框

     - ref

  6. fork

     - url 通信问题

  7. 研发空间

     - 仓库页面加载方案
     - url 如何适配？

  8. 新权限体系

  9. hover 展示项目资源概览

     - dompurify 库转译标签（XSS 攻击

  10. UI 改版

      - 导航 mr 数量
        - 数据更新问题
      - 文件头部吸顶
        - ResizeObserver

      - commit graph

  11. 切换仓库键盘控制







